# msdial2cytoscape4lipidomics

<!-- badges: start -->
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


<!-- badges: end -->

## Overview

This Shiny application is designed to facilitate the analysis of non-targeted lipidomics data. It allows users to easily upload alignment result tables generated by MS-DIAL and, optionally, integrate sample class information for further data exploration. The application provides interactive data visualizations, enabling users to inspect lipid species distributions, compare sample groups, and generate pathway analysis diagrams.

Key features include:

- Simple file upload interface for MS-DIAL alignment results
- Integration of sample metadata for enhanced analysis
- Interactive visualizations for exploring lipid species across samples
- Customizable generation of pathway analysis diagrams with Cytoscape desktop app



# Run msdial2cytoscape4lipidomics locally

### Step 1: Clone this repository

Open the terminal and run:

``` bash
git clone "https://github.com/systemsomicslab/msdial2cytoscape-for-lipidomics.git"
```

### Step 2: Bulid Docker image

``` bash
docker build -t msdial2cytoscape4lipidomics .
```

### Step 3: Run Docker image

Run the container on your terminal once it has been bulied.

``` bash
docker run --rm -p 1028:1028 -p 9000:9000 msdial2cytoscape4lipidomics
```

### Step 4: Run msdial2cytoscape for lipidomics in your browser

Open your browser and paste `http://localhost:1028`. 

# Prepare input files
## m/z peak files
MetaboShiny does not accept raw peak data. We suggest using either XCMS (with the MetaboAnalyst export option) or another method of choice such as MSnbase. You can find examples of three different accepted data formats (MetaboAnalyst-like, MetaboShiny native and Metabolights) in the [inst/examples](./inst/examples) folder.

## Metadata file
MetaboShiny, unless using the MetaboAnalyst format, requires an additional metadata table. This should minimally have a 'sample' column that contains the same sample identifiers used in the peak table files, an 'individual' column (since multiple samples can come from one individual in time series data) and at least one column on experimental group or something alike. Examples of metadata formats are also present in the [inst/examples](./inst/examples) folder.

# Load data files
![File Import](inst/www/file_import.png?raw=true "File import")

1. Enter a unique project name.
2. Set the error margin of your mass spectrometer in parts per million (ppm).
3. Set the m/z missing values percentage threshold. This is how many samples are allowed to be missing each m/z value without it being filtered out.
4. Select input data files
 * 4a. (optional) Input a regex string to to adjust peaklist names to metadata sample names - the match is removed from each name.
 * 4b. Upload your metadata and positive and negative mode m/z peak files.
5. Click on the arrow to merge peak data and metadata and convert them to a format that will serve as the input for the analyses.
6. Once step 5 is completed (green tick mark), continue to the [Data normalization](#data-normalization) step.



