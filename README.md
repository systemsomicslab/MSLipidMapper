# msdial2cytoscape4lipidomics

<!-- badges: start -->
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


<!-- badges: end -->

## Overview

This Shiny application is designed to facilitate the analysis of non-targeted lipidomics data. It allows users to easily upload alignment result tables generated by MS-DIAL and, optionally, integrate sample class information for further data exploration. The application provides interactive data visualizations, enabling users to inspect lipid species distributions, compare sample groups, and generate pathway analysis diagrams.

Key features include:

- Simple file upload interface for MS-DIAL alignment results
- Integration of sample metadata for enhanced analysis
- Interactive visualizations for exploring lipid species across samples
- Customizable generation of pathway analysis diagrams with Cytoscape desktop app



## Run msdial2cytoscape4lipidomics locally

### Step 1: Clone this repository

Open the terminal and run:

``` bash
git clone "https://github.com/systemsomicslab/msdial2cytoscape-for-lipidomics.git"
```

### Step 2: Bulid Docker image

``` bash
docker build -t msdial2cytoscape4lipidomics .
```

### Step 3: Run Docker image

Run the container on your terminal once it has been bulied.

``` bash
docker run --rm -p 1028:1028 -p 9000:9000 msdial2cytoscape4lipidomics
```

### Step 4: Run msdial2cytoscape for lipidomics in your browser

Open your browser and paste `http://localhost:1028`. 

## Prepare input files
msdial2cytoscape4lipidomics does not accept raw data input. It is highly recommended to use the alignment table processed by MS-DIAL. This application utilizes the alignment table from MS-DIAL to visualize lipidomics data in Cytoscape.

Additionally, we support a data frame format where lipid molecules are arranged in columns, and sample IDs are placed in rows. In this format, the second row must contain metadata about the samples. This ensures that essential sample information is included for proper analysis and visualization.

The file format must be CSV.

Examples of supported data formats can be found in the inst/examples folder. Please prepare either the alignment table exported from MS-DIAL or the data frame format mentioned above, ensuring that sample metadata is included in the second row, for use in Cytoscape visualization.

### Metadata file
In msdial2cytoscape4lipidomics, you can provide sample metadata separately using a CSV file. This metadata file offers detailed information about each sample, which is essential for visualization and analysis in Cytoscape.

Please ensure that the metadata file follows these guidelines:

Sample IDs must be listed in rows, and they should match those in the alignment table or data frame.
Sample attributes (e.g., group, treatment condition, time points) should be listed in columns.
The file format must be CSV.
Using a metadata file allows you to incorporate additional information about each sample, enabling more comprehensive analysis in Cytoscape. Examples of the metadata file format can be found in the inst/examples folder.

## Load data files
![File Import](inst/www/file_import.png?raw=true "File import")

1. Enter a unique project name.
2. Set the error margin of your mass spectrometer in parts per million (ppm).
3. Set the m/z missing values percentage threshold. This is how many samples are allowed to be missing each m/z value without it being filtered out.
4. Select input data files
 * 4a. (optional) Input a regex string to to adjust peaklist names to metadata sample names - the match is removed from each name.
 * 4b. Upload your metadata and positive and negative mode m/z peak files.
5. Click on the arrow to merge peak data and metadata and convert them to a format that will serve as the input for the analyses.
6. Once step 5 is completed (green tick mark), continue to the [Data normalization](#data-normalization) step.



